import socket      
import subprocess

HOST = '127.0.0.1'
PORT = 5000
length = 1024


def connect(s):
    print(s.recv(length).decode())
    print(s.recv(length).decode())

    info = subprocess.check_output(['systeminfo']).decode('utf-8').split('\n')

    msg = []
    for item in info:
        msg.append(str(item.split("\r")[:-1]))

    s.send(repr(msg).encode('utf-8'))

    return s.recv(length).decode()


if __name__ == "__main__":
    socket = socket.socket()
    socket.connect((HOST, PORT))

    while True:
        o = connect(socket)

        if o == 'end':
            print(socket.recv(length).decode())
            break

    socket.close()
